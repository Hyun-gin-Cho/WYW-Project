--ȸ�� ��ȣ ������(PRIMARY KEY)
CREATE SEQUENCE USERNOSQ NOCACHE;

CREATE TABLE USERDATA(
	USERNO NUMBER NOT NULL,
	USERID VARCHAR2(500) NOT NULL,
	USERPW VARCHAR2(500) NOT NULL,
	USERNAME VARCHAR2(1000) NOT NULL,
	USERADDR VARCHAR2(4000) NOT NULL,
	USERPHONE VARCHAR2(4000) NOT NULL,
	USEREMAIL VARCHAR2(100) NOT NULL,
	USERENABLED VARCHAR2(2) NOT NULL,
	USERROLE VARCHAR2(50) NOT NULL,
	USERFOLLOW NUMBER NOT NULL,
	CONSTRAINT USERDATA_PK PRIMARY KEY(USERNO),
	CONSTRAINT USERDATA_UQ_ID UNIQUE(USERID),
	CONSTRAINT USERDATA_UQ_PHONE UNIQUE(USERPHONE),
	CONSTRAINT USERDATA_UQ_EMAIL UNIQUE(USEREMAIL),
	CONSTRAINT USERDATA_ENABLE_CHK CHECK(USERENABLED IN('Y','N'))
);

UPDATE USERDATA SET USERNO=USERNOSQ.NEXTVAL WHERE USERNO=1;

INSERT INTO USERDATA VALUES(
USERNOSQ.NEXTVAL, 'ADMIN', 'ADMIN123', '관리자', '서울시 중랑구', '010-1234-1234', 'ADMIN123@NAVER.COM', 'Y', 
'MANAGER', 0
);

INSERT INTO USERDATA VALUES(
USERNOSQ.NEXTVAL, 'USER1', 'USER123', '홍길동', '서울시 서초구', '010-1234-4321', 'USER1@GAMIL.COM', 'Y', 
'USER', 0
);
SELECT * FROM USERDATA;

--�� ��ȣ ������(PRIMARY KEY)
CREATE SEQUENCE BOARDNOSQ NOCACHE;

DROP SEQUENCE GROUPNOSQ;

--�׷� ��ȣ ������(���ο� �� ��� �� ����)
CREATE SEQUENCE GROUPNOSQ NOCACHE;

CREATE TABLE USERCONTENT(
	BOARDNO NUMBER NOT NULL,
	GROUPNO NUMBER NOT NULL,
	GROUPSQ NUMBER NOT NULL,
	TITLE VARCHAR2(2000) ,
	CONTENT VARCHAR2(4000),
	USERID NUMBER NOT NULL, 
	USERIMGNAME VARCHAR2(50),
	USERIMG VARCHAR2(100),
	USERLIKE NUMBER NOT NULL,
	REGDATE DATE NOT NULL,
	CONSTRAINT USERCONTENT_PK PRIMARY KEY(BOARDNO),
	CONSTRAINT USERCONTENT_FK FOREIGN KEY(USERID) REFERENCES USERDATA(USERNO)
);

INSERT INTO USERCONTENT VALUES(
BOARDNOSQ.NEXTVAL, GROUPNOSQ.NEXTVAL, 1, 'TEST공지 1번째', 'TEST 중입니다.(1)', '1', NULL, NULL, 0, SYSDATE
);

INSERT INTO USERCONTENT VALUES(
BOARDNOSQ.NEXTVAL, GROUPNOSQ.NEXTVAL, 1, 'TEST공지 2번째', 'TEST 중입니다.(2)', '1', NULL, NULL, 0, SYSDATE
);
INSERT INTO USERCONTENT VALUES(
BOARDNOSQ.NEXTVAL, GROUPNOSQ.NEXTVAL, 1, 'TEST일반게시글 1번째', 'TEST 중입니다.(3)', '2', NULL, NULL, 0, SYSDATE
);

INSERT INTO USERCONTENT VALUES(
BOARDNOSQ.NEXTVAL, GROUPNOSQ.NEXTVAL, 1, 'TEST공지 3번째', 'TEST 중입니다.(4)', '1', NULL, NULL, 0, SYSDATE
);

 SELECT * FROM USERDATA WHERE USERID LIKE '%USER%' ORDER BY USERNO DESC;

CREATE TABLE USERFOLLOW(
   FOLLOWNO NUMBER NOT NULL,
   FOLLOWUSER NUMBER NOT NULL,
   FOLLOWINGUSER NUMBER NOT NULL,
   CONSTRAINT FOLLOWNO_PK PRIMARY KEY(FOLLOWNO),
   CONSTRAINT FOLLOWUSER_FK FOREIGN KEY(FOLLOWUSER) REFERENCES USERDATA(USERNO),
   CONSTRAINT FOLLOWINGUSER_FK FOREIGN KEY(FOLLOWINGUSER) REFERENCES USERDATA(USERNO)
);


SELECT * FROM USERCONTENT ORDER BY GROUPNO DESC, GROUPSQ;

SELECT * FROM USERCONTENT JOIN USERDATA ON(USERCONTENT.USERID = USERDATA.USERNO) WHERE USERROLE='MANAGER' ORDER BY REGDATE DESC;



SELECT * FROM USERDATA;

DROP TABLE USERCONTENT;


SELECT * FROM USERCONTENT JOIN USERDATA USING(USERID) WHERE USERROLE='MANAGER'
ORDER BY REGDATE DESC ;